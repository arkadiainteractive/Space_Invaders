[gd_scene load_steps=21 format=4 uid="uid://ba2xc6fktv5ap"]

[ext_resource type="Script" path="res://Weapons/Fire/Scripts/fire.gd" id="1_pn776"]
[ext_resource type="Texture2D" uid="uid://dqggxeg1m6lpo" path="res://Weapons/Fire/Models/fire_0.png" id="2_c0y0u"]
[ext_resource type="Shader" path="res://GPUTrail-main/shaders/trail.gdshader" id="3_a7u18"]
[ext_resource type="Shader" path="res://GPUTrail-main/shaders/trail_draw_pass.gdshader" id="4_pim8p"]
[ext_resource type="Texture2D" uid="uid://crk6pkb7e5rwc" path="res://GPUTrail-main/defaults/texture.tres" id="5_jqdvk"]
[ext_resource type="Texture2D" uid="uid://ct31fhxvcragr" path="res://GPUTrail-main/defaults/curve.tres" id="6_4km7n"]
[ext_resource type="Script" path="res://GPUTrail-main/GPUTrail3D.gd" id="7_k5lqk"]

[sub_resource type="BoxShape3D" id="BoxShape3D_75hv3"]
size = Vector3(0.413253, 0.425026, 0.427791)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_cib4h"]
resource_name = "Material.1"
vertex_color_use_as_albedo = true
albedo_color = Color(1, 0, 0, 1)
albedo_texture = ExtResource("2_c0y0u")
metallic = 0.2
roughness = 0.5

[sub_resource type="ArrayMesh" id="ArrayMesh_njgki"]
_surfaces = [{
"aabb": AABB(-1, 1, 0, 2, 2, 2),
"format": 34359742465,
"index_count": 144,
"index_data": PackedByteArray("AAACAAEAAgAAAAMAAAAFAAQABQAAAAEAAAAGAAMABgAAAAQABwAJAAgACQAHAAoABAAHAAgABwAEAAUABAAJAAYACQAEAAgAAwALAAIACwADAAwACwAOAA0ADgALAAwAAwAOAAwADgADAAYACgAPAAkADwAKABAADQAPABAADwANAA4ABgAPAA4ADwAGAAkAAQASABEAEgABAAIAAQATAAUAEwABABEAEQAUABMAFAARABIAFQAKAAcACgAVABYABQAVAAcAFQAFABMAEwAWABUAFgATABQAAgAXABIAFwACAAsAFwANABgADQAXAAsAEgAYABQAGAASABcAFgAQAAoAEAAWABkAGAAQABkAEAAYAA0AFAAZABYAGQAUABgA"),
"name": "Material.1",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 26,
"vertex_data": PackedByteArray("AACAvwAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAAAAgD8AAIA/AACAvwAAgD8AAIA/AACAvwAAAEAAAAAAAAAAAAAAAEAAAAAAAACAvwAAAEAAAIA/AAAAAAAAQEAAAAAAAACAvwAAQEAAAAAAAACAvwAAQEAAAIA/AAAAAAAAQEAAAIA/AAAAAAAAgD8AAABAAACAvwAAgD8AAABAAAAAAAAAAEAAAABAAACAvwAAAEAAAABAAACAvwAAQEAAAABAAAAAAAAAQEAAAABAAACAPwAAgD8AAAAAAACAPwAAgD8AAIA/AACAPwAAAEAAAAAAAACAPwAAAEAAAIA/AACAPwAAQEAAAAAAAACAPwAAQEAAAIA/AACAPwAAgD8AAABAAACAPwAAAEAAAABAAACAPwAAQEAAAABA")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_6tybv"]
resource_name = "fire_mesh"
_surfaces = [{
"aabb": AABB(-1, 1, 0, 2, 2, 2),
"attribute_data": PackedByteArray("AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9AADAPQAAAD0AAMA9AAAAPQAAwD0AAAA9"),
"format": 34359742487,
"index_count": 144,
"index_data": PackedByteArray("AAACAAEAAgAAAAMABAAGAAUABgAEAAcACAAKAAkACgAIAAsADAAOAA0ADgAMAA8ABQARABAAEQAFAAYACwASAAoAEgALABMAAwAUAAIAFAADABUAFgAYABcAGAAWABkACQAbABoAGwAJAAoADwAcAA4AHAAPAB0AFwAfAB4AHwAXABgACgAgABsAIAAKABIAAQAiACEAIgABAAIABwAjAAYAIwAHACQAJQAnACYAJwAlACgAKQAPAAwADwApACoABgArABEAKwAGACMAJgAtACwALQAmACcAAgAuACIALgACABQALwAXADAAFwAvABYAKAAxACcAMQAoADIAKgAdAA8AHQAqADMAMAAeADQAHgAwABcAJwA1AC0ANQAnADEA"),
"material": SubResource("StandardMaterial3D_cib4h"),
"name": "Material.1",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 54,
"vertex_data": PackedByteArray("AACAvwAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAAAAgD8AAIA/AACAvwAAgD8AAIA/AACAvwAAgD8AAAAAAACAvwAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgD8AAAAAAACAvwAAgD8AAAAAAACAvwAAgD8AAIA/AACAvwAAAEAAAIA/AACAvwAAAEAAAAAAAAAAAAAAQEAAAAAAAACAvwAAQEAAAAAAAACAvwAAQEAAAIA/AAAAAAAAQEAAAIA/AACAvwAAQEAAAAAAAAAAAAAAQEAAAAAAAACAvwAAQEAAAIA/AACAvwAAQEAAAAAAAAAAAAAAgD8AAABAAACAvwAAgD8AAABAAAAAAAAAgD8AAABAAAAAAAAAAEAAAABAAACAvwAAAEAAAABAAACAvwAAgD8AAABAAACAvwAAgD8AAABAAACAvwAAAEAAAABAAACAvwAAQEAAAABAAAAAAAAAQEAAAABAAAAAAAAAQEAAAABAAACAvwAAQEAAAABAAACAvwAAQEAAAABAAACAPwAAgD8AAAAAAACAPwAAgD8AAIA/AACAPwAAAEAAAAAAAACAPwAAgD8AAAAAAACAPwAAgD8AAAAAAACAPwAAAEAAAAAAAACAPwAAAEAAAIA/AACAPwAAgD8AAIA/AACAPwAAQEAAAAAAAACAPwAAQEAAAIA/AACAPwAAQEAAAAAAAACAPwAAQEAAAAAAAACAPwAAQEAAAIA/AACAPwAAgD8AAABAAACAPwAAgD8AAABAAACAPwAAAEAAAABAAACAPwAAAEAAAABAAACAPwAAgD8AAABAAACAPwAAQEAAAABAAACAPwAAQEAAAABAAACAPwAAQEAAAABA/38AAP///7//fwAA////v/9/AAD///+//38AAP///7//////////v/////////+//////////7//////////vwAA/3////+/AAD/f////78AAP9/////vwAA/3////+//3///////7//f///////v/9///////+//3///////7//////////v/////////+/AAD/f////78AAP9/////v/9/AAD///+//38AAP///7//f/9/////P/9//3////8//3//f////z//f/9/////PwAA/3////+/AAD/f////7//f///////v/9///////+//3//f////z//f/9/////PwAA/3////+//38AAP///7//fwAA////v/////////+//////////7////9/////v////3////+/////f////7////9/////v/9///////+//3///////7//////////v////3////+/////f////7//fwAA////v/9//3////8//3//f////z////9/////v////3////+//3///////7//f/9/////P////3////+/")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_njgki")

[sub_resource type="Gradient" id="Gradient_17ce0"]
colors = PackedColorArray(1, 0, 0, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_h6ccu"]
gradient = SubResource("Gradient_17ce0")

[sub_resource type="Curve" id="Curve_7pgpl"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.879808, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_jkj1d"]
curve = SubResource("Curve_7pgpl")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_lmqqr"]
direction = Vector3(0, 0, 0)
radial_velocity_min = -2.23517e-05
radial_velocity_max = -2.23517e-05
gravity = Vector3(0, 0, 0)
scale_min = 0.1
scale_max = 0.4
scale_curve = SubResource("CurveTexture_jkj1d")
color_ramp = SubResource("GradientTexture1D_h6ccu")

[sub_resource type="BoxMesh" id="BoxMesh_vapf0"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_strui"]
shader = ExtResource("3_a7u18")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_t13vf"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("4_pim8p")
shader_parameter/emmission_transform = Projection(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
shader_parameter/flags = 4
shader_parameter/tex = ExtResource("5_jqdvk")
shader_parameter/color_ramp = ExtResource("5_jqdvk")
shader_parameter/curve = ExtResource("6_4km7n")

[sub_resource type="QuadMesh" id="QuadMesh_2rv5c"]
material = SubResource("ShaderMaterial_t13vf")

[node name="Fire" type="CharacterBody3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, -0.397282, -0.196749)
collision_layer = 2
collision_mask = 2
script = ExtResource("1_pn776")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.188213, 0.397242, 0.00104809)
shape = SubResource("BoxShape3D_75hv3")

[node name="OmniLight3D" type="OmniLight3D" parent="CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.555298, 0, -2.42144e-08)
light_color = Color(1, 0, 0, 1)
light_energy = 16.0
light_indirect_energy = 16.0
light_size = 1.0
omni_attenuation = 10.0

[node name="OmniLight3D2" type="OmniLight3D" parent="CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.501545, 0, 2.21189e-08)
light_color = Color(1, 0, 0, 1)
light_energy = 16.0
light_indirect_energy = 16.0
light_size = 1.0
omni_attenuation = 10.0

[node name="Fire" type="MeshInstance3D" parent="CollisionShape3D"]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.00038109, -0.401994, -0.201018)
mesh = SubResource("ArrayMesh_6tybv")
skeleton = NodePath("")

[node name="GPUParticles3D" type="GPUParticles3D" parent="CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00212176, 4.1455e-05, -0.0010481)
visible = false
amount = 20000
lifetime = 0.5
trail_lifetime = 2.73
process_material = SubResource("ParticleProcessMaterial_lmqqr")
draw_pass_1 = SubResource("BoxMesh_vapf0")

[node name="SpotLight3D" type="SpotLight3D" parent="CollisionShape3D"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0.263614, 0.0102731, -0.00119287)
visible = false
light_energy = 16.0
light_size = 1.0
light_specular = 16.0
spot_range = 20.0
spot_attenuation = -10.0
spot_angle = 15.0

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="GPUTrail3D" type="GPUParticles3D" parent="."]
transform = Transform3D(0.05, 0, 0, 0, 0.05, 0, 0, 0, 0.05, -0.188213, 0.397242, 0.00104809)
amount = 30
lifetime = 30.0
one_shot = true
explosiveness = 1.0
fixed_fps = 0
process_material = SubResource("ShaderMaterial_strui")
draw_pass_1 = SubResource("QuadMesh_2rv5c")
script = ExtResource("7_k5lqk")
length = 30
color_ramp = ExtResource("5_jqdvk")
curve = ExtResource("6_4km7n")
billboard = true
dewiggle = false
clip_overlaps = false
_defaults_have_been_set = true

[node name="Area3D" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.188213, 0.397242, 0.00104809)
shape = SubResource("BoxShape3D_75hv3")

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="body_exited" from="Area3D" to="." method="_on_area_3d_body_exited"]
